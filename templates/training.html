{% extends "base.html" %}
{% block title %}Entrenamiento{% endblock %}

{% block content %}
<h2 class="text-lg mb-3">AÃ±adir Puntos al Entrenamiento</h2>

<form method="POST">
    <input type="date" name="date" value="{{ date }}" class="bg-gray-700 rounded px-2 py-1 mb-4" required>

    <div class="overflow-auto mb-4">
        <table class="w-full table-auto">
            <thead class="bg-gray-800">
                <tr>
                    <th class="px-2 py-2">Jugador</th>
                    <th class="px-2 py-2">Puntos</th>
                </tr>
            </thead>
            <tbody>
                {% for player in players %}
                <tr class="border-b border-gray-700">
                    <td class="px-2 py-2">{{ player.name }}</td>
                    <td class="px-2 py-2">
                        <input type="number" name="points_{{player.id}}" min="0"
                               value="{{ existing_points[player.id] if player.id in existing_points else '' }}"
                               class="bg-gray-700 rounded px-2 py-1 w-full">
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    <button type="submit" class="bg-primary text-dark font-semibold rounded px-3 py-2 mt-4 w-full">
        Guardar puntos
    </button>
</form>

<script>
document.querySelector('input[type="date"]').addEventListener('change', function() {
    window.location.href = "{{ url_for('training.training') }}?date=" + this.value;
});
</script>
{% endblock %}
